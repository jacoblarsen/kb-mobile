<project name="aleph-gateway" basedir="." default="compile">
	
	<property name="lib.dir" value="lib" />
	<property name="cop.common.conf" value="../conf" />
	<property name="src.dir" value="src" />
	<property name="class.dir" value="classes" />
	
	<!-- Set Classpath equal to what is needed -->
	<path id="classpath">
		<fileset dir="${lib.dir}" includes="**/*.jar" />
	</path>

	<!-- Delete everything autogenerated files -->
	<target name="clean" description="Clean the project">
		<delete dir="${class.dir}" />
		<delete file="${lib.dir}/${ant.project.name}-simple.jar"/>
	</target>

	<!--Compile the module  -->
	<target name="compile" description="Compiles the whole bundle">
		<mkdir dir="${class.dir}" />
		<javac srcdir="${src.dir}" destdir="${class.dir}" classpathref="classpath">
		</javac>
	</target>

	<!--Create simple jar file  -->
	<target name="jar" depends="clean, compile" description="Create simple jar file">
		<jar destfile="${lib.dir}/${ant.project.name}-simple.jar">
		    <fileset dir="${class.dir}" />
		    <manifest>
				<attribute name="Main-Class" value="dk.kb.dis.mobileGateway.webapp.Jetty"/>
			</manifest>
		</jar>
	</target>
	
	<!--Run jetty from ant  -->
	<target name="run" depends="jar" description="Run jetty from ant">
		<java classname="dk.kb.dis.mobileGateway.webapp.Jetty" classpathref="classpath" fork="true"/>
	</target>

</project>
